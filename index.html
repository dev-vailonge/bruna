<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Curso de Doces Saud√°veis</title>
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-KD4RDB8L");
    </script>
    <!-- End Google Tag Manager -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                DEFAULT: "#2F6853", // Dark green from background
                light: "#3C7D65", // Slightly lighter green
                dark: "#235442", // Darker green for hover states
              },
              secondary: "#F4B860", // Gold color from the text
              dark: "#1a1a1a",
              light: "#ffffff",
            },
          },
        },
      };
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("acForm")
          .addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = {
              contact: {
                email: document.getElementById("email").value,
                firstName: document.getElementById("name").value,
                phone: document.getElementById("phone").value,
                listid: "YOUR_LIST_ID", // Replace with your actual list ID
                fieldValues: [
                  {
                    field: "utm_campaign",
                    value:
                      document.querySelector('input[name="field[23]"]')
                        ?.value || "",
                  },
                  {
                    field: "utm_medium",
                    value:
                      document.querySelector('input[name="field[25]"]')
                        ?.value || "",
                  },
                  {
                    field: "utm_source",
                    value:
                      document.querySelector('input[name="field[24]"]')
                        ?.value || "",
                  },
                  {
                    field: "utm_content",
                    value:
                      document.querySelector('input[name="field[26]"]')
                        ?.value || "",
                  },
                  {
                    field: "utm_term",
                    value:
                      document.querySelector('input[name="field[27]"]')
                        ?.value || "",
                  },
                  {
                    field: "paginaCaptura",
                    value:
                      document.querySelector('input[name="field[29]"]')
                        ?.value || "",
                  },
                ],
              },
            };

            const responseMessage = document.getElementById("responseMessage");

            try {
              const response = await fetch(
                "https://youraccount.api-us1.com/api/3/contacts",
                {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    "Api-Token": "YOUR_API_KEY", // Replace with your ActiveCampaign API key
                  },
                  body: JSON.stringify(formData),
                }
              );

              const data = await response.json();

              if (response.ok && !data.error) {
                
              } else {
                responseMessage.textContent =
                  data.error || "‚ùå Erro ao enviar o formul√°rio.";
                responseMessage.classList.add("text-red-600");
                console.error("Form submission error:", data);
              }
            } catch (error) {
              console.error("API error:", error);
              responseMessage.textContent = "‚ùå Erro ao conectar ao servidor.";
              responseMessage.classList.add("text-red-600");
            }
          });
      });
    </script>
  </head>
  <body class="bg-primary-light">
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-KD4RDB8L"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- Hero Section with Picture and Form -->
    <section class="bg-primary text-light py-20">
      <div class="container mx-auto px-4 max-w-6xl">
        <div class="flex flex-col md:flex-row items-center gap-12">
          <div class="w-full md:w-1/2">
            <h1 class="text-4xl font-bold mb-4 text-secondary">
              Doces Saud√°veis
            </h1>
            <p class="text-gray-300 mb-8">
              Participe da nossa aula exclusiva e aprenda a fazer doces
              deliciosos sem a√ß√∫car e sem gl√∫ten.
            </p>
            <form id="acForm" class="space-y-4">
              <input
                type="text"
                id="name"
                placeholder="Seu Nome"
                class="w-full p-3 rounded-lg bg-primary-dark/50 border border-primary-light focus:outline-none focus:border-secondary"
                required
              />
              <input
                type="email"
                id="email"
                placeholder="Seu Email"
                class="w-full p-3 rounded-lg bg-primary-dark/50 border border-primary-light focus:outline-none focus:border-secondary"
                required
              />
              <input
                type="tel"
                id="phone"
                placeholder="Seu WhatsApp"
                class="w-full p-3 rounded-lg bg-primary-dark/50 border border-primary-light focus:outline-none focus:border-secondary"
                required
              />
              <button
                type="submit"
                class="w-full bg-secondary hover:bg-secondary/90 text-primary-dark font-bold py-3 px-6 rounded-lg transition-colors"
              >
                Reservar Minha Vaga
              </button>
              <p id="responseMessage" class="mt-4 text-center"></p>
            </form>
          </div>
          <div class="w-full md:w-1/2">
            <img
              src="cake.JPG"
              alt="Bolo saud√°vel"
              class="rounded-lg w-full h-[500px] object-cover shadow-xl"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- About the Class Section -->
    <section class="py-20 bg-light">
      <div class="container mx-auto px-4 max-w-6xl">
        <h2 class="text-3xl font-bold text-center mb-12 text-primary">
          O Que Voc√™ Vai Aprender
        </h2>
        <div class="grid md:grid-cols-3 gap-8">
          <div
            class="bg-primary/5 p-6 rounded-lg shadow-md hover:scale-105 transition-transform duration-300"
          >
            <h3 class="text-xl font-bold mb-4 text-primary text-center">
              <span class="text-4xl block mb-3">üçØ</span>
              Ado√ßantes Naturais
            </h3>
            <p class="text-gray-600">
              Descubra alternativas saud√°veis ao a√ß√∫car refinado e aprenda como
              us√°-las efetivamente em seus doces.
            </p>
          </div>
          <div
            class="bg-primary/5 p-6 rounded-lg shadow-md hover:scale-105 transition-transform duration-300"
          >
            <h3 class="text-xl font-bold mb-4 text-primary text-center">
              <span class="text-4xl block mb-3">üåæ</span>
              T√©cnicas Sem Gl√∫ten
            </h3>
            <p class="text-gray-600">
              Domine a arte da confeitaria sem gl√∫ten com nossas misturas de
              farinhas e t√©cnicas especialmente desenvolvidas.
            </p>
          </div>
          <div
            class="bg-primary/5 p-6 rounded-lg shadow-md hover:scale-105 transition-transform duration-300"
          >
            <h3 class="text-xl font-bold mb-4 text-primary text-center">
              <span class="text-4xl block mb-3">‚ú®</span>
              Texturas Perfeitas
            </h3>
            <p class="text-gray-600">
              Aprenda a alcan√ßar a textura perfeita em seus doces sem usar
              ingredientes tradicionais.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- About the Chef Section -->
    <section class="py-20 bg-primary">
      <div class="container mx-auto px-4 max-w-6xl">
        <div class="flex flex-col md:flex-row items-center gap-12">
          <div class="w-full md:w-1/3">
            <img
              src="bruhash.png"
              alt="Bruna Hash"
              class="rounded-lg w-full max-w-md mx-auto shadow-xl"
            />
          </div>
          <div class="w-full md:w-2/3">
            <h2 class="text-4xl font-bold mb-8 text-secondary">
              Quem √© a Bruna?
            </h2>
            <div class="space-y-6 text-light/90 text-lg">
              <p>
                Bru Hash √© apaixonada por doces e por cuidar da sua sa√∫de.
                Pensando em unir as duas paix√µes, abriu uma empresa de doces
                saud√°veis na Alemanha: a Anis.
              </p>
              <p>
                Por√©m, ela e seu marido mudaram-se para a Espanha e foi preciso
                fechar a Anis. Suas clientes sentiram falta dos doces saud√°veis,
                o que a motivou a compartilhar todo o seu conhecimento, dando
                origem ao Santo Doce.
              </p>
              <p>
                Hoje Bruna tem mais de 400 alunas em 18 pa√≠ses, e ensina suas
                receitas de doces saud√°veis que fizeram tanto sucesso na
                Alemanha.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script>
      console.log(
        "%cScript de rastreio 4.0 by Comunidade Nova Ordem do Digital - Dericson Calari e Samuel Choairy",
        "color: yellow; font-size: 20px;"
      );

      (function () {
        function getParameterByName(name, url) {
          if (!url) url = window.location.href;
          name = name.replace(/[\[\]]/g, "\\$&");
          var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return "";
          return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        function setCookie(cookieName, cookieValue, expirationTime) {
          var cookiePath = "/";
          expirationTime = expirationTime * 1000;
          var date = new Date();
          var dateTimeNow = date.getTime();
          date.setTime(dateTimeNow + expirationTime);
          var expirationDate = date.toUTCString();
          document.cookie =
            cookieName +
            "=" +
            cookieValue +
            "; expires=" +
            expirationDate +
            "; path=" +
            cookiePath;
        }

        function getCookieValue(name) {
          const value = `; ${document.cookie}`;
          const parts = value.split(`; ${name}=`);
          if (parts.length === 2) return parts.pop().split(";").shift();
          return null;
        }

        const adParams = ["fbclid", "gclid"];
        const urlParams = new URLSearchParams(window.location.search);
        let isAdClick = false;

        adParams.forEach((param) => {
          if (urlParams.has(param)) {
            isAdClick = true;
          }
        });

        if (isAdClick) {
          const utmSource = getParameterByName("utm_source");
          const utmMedium = getParameterByName("utm_medium");
          const utmCampaign = getParameterByName("utm_campaign");
          const utmContent = getParameterByName("utm_content");
          const utmTerm = getParameterByName("utm_term");

          if (utmSource) setCookie("cookieUtmSource", utmSource, 63072000);
          if (utmMedium) setCookie("cookieUtmMedium", utmMedium, 63072000);
          if (utmCampaign)
            setCookie("cookieUtmCampaign", utmCampaign, 63072000);
          if (utmContent) setCookie("cookieUtmContent", utmContent, 63072000);
          if (utmTerm) setCookie("cookieUtmTerm", utmTerm, 63072000);
        }

        let parametros = [
          "utm_source",
          "utm_medium",
          "utm_campaign",
          "utm_content",
          "utm_term",
        ];
        const urlParamsCapt = new URLSearchParams(window.location.search);
        const urlParamsCaptReferrer = new URLSearchParams(
          document.referrer.split("?")[1] || ""
        );
        let utms = {};

        const cookieUtmSource = getCookieValue("cookieUtmSource");
        const cookieUtmMedium = getCookieValue("cookieUtmMedium");
        const cookieUtmCampaign = getCookieValue("cookieUtmCampaign");
        const cookieUtmContent = getCookieValue("cookieUtmContent");
        const cookieUtmTerm = getCookieValue("cookieUtmTerm");

        parametros.forEach((el) => {
          if (el === "utm_source") {
            utms[el] =
              urlParamsCapt.get(el) ??
              (document.referrer
                ? urlParamsCaptReferrer.get(el) ??
                  new URL(document.referrer).hostname
                : "direto");
          } else {
            utms[el] =
              urlParamsCapt.get(el) ?? urlParamsCaptReferrer.get(el) ?? "";
          }
        });

        let scks = Object.values(utms).filter((value) => value !== "");
        let currentSckValues = [];

        if (urlParamsCapt.get("sck")) {
          currentSckValues = urlParamsCapt.get("sck").split("|");
        }

        scks = scks.filter((value) => !currentSckValues.includes(value));
        let srcValues = [
          cookieUtmSource,
          cookieUtmMedium,
          cookieUtmCampaign,
          cookieUtmContent,
          cookieUtmTerm,
        ].filter((value) => value !== null && value !== "");

        const updateLinks = (el, elURL) => {
          const elSearchParams = new URLSearchParams(elURL.search);
          let modified = false;

          urlParams.forEach((value, key) => {
            if (!elSearchParams.has(key)) {
              elSearchParams.append(key, value);
              modified = true;
            }
          });

          for (let key in utms) {
            if (!elSearchParams.has(key)) {
              elSearchParams.append(key, utms[key]);
              modified = true;
            }
          }

          if (cookieUtmSource)
            elSearchParams.append("cookieUtmSource", cookieUtmSource);
          if (cookieUtmMedium)
            elSearchParams.append("cookieUtmMedium", cookieUtmMedium);
          if (cookieUtmCampaign)
            elSearchParams.append("cookieUtmCampaign", cookieUtmCampaign);
          if (cookieUtmContent)
            elSearchParams.append("cookieUtmContent", cookieUtmContent);
          if (cookieUtmTerm)
            elSearchParams.append("cookieUtmTerm", cookieUtmTerm);

          if (!elSearchParams.has("sck") && scks.length > 0) {
            elSearchParams.append("sck", scks.join("|"));
            modified = true;
          }

          if (!elSearchParams.has("src") && srcValues.length > 0) {
            elSearchParams.append("src", srcValues.join("|"));
            modified = true;
          }

          if (modified) {
            return (
              elURL.origin + elURL.pathname + "?" + elSearchParams.toString()
            );
          }
          return el.href;
        };

        document.querySelectorAll("a").forEach((el) => {
          try {
            const elURL = new URL(el.href, window.location.origin);
            if (!elURL.hash) {
              el.href = updateLinks(el, elURL);
            }
          } catch (e) {
            console.warn("Erro ao processar URL no link:", el.href);
          }
        });

        document.querySelectorAll("iframe").forEach((iframe) => {
          let actualSrc = iframe.hasAttribute("data-src")
            ? iframe.getAttribute("data-src")
            : iframe.src;
          if (actualSrc) {
            try {
              const iframeURL = new URL(actualSrc, window.location.origin);
              if (iframe.hasAttribute("data-src")) {
                iframe.setAttribute("data-src", updateLinks(iframe, iframeURL));
              } else {
                iframe.src = updateLinks(iframe, iframeURL);
              }
            } catch (e) {
              console.warn("Erro ao processar URL no iframe:", actualSrc);
            }
          }
        });
      })();
    </script>
    <script>
      const utms = {
        campaign: 23,
        medium: 25,
        source: 24,
        content: 26,
        term: 27,
        paginaCaptura: 29,
      };

      const prefixo = "utm_";

      function criarCampos() {
        const form = document.querySelectorAll("form");
        const urlParamsCapt = new URLSearchParams(window.location.search);
        const urlParamsCaptReferrer = new URLSearchParams(
          document.referrer.split("?")[1] || ""
        );

        form.forEach((el) => {
          for (let utm in utms) {
            const paramName = prefixo + utm;
            if (!el.querySelector(`input[name="field[${utms[utm]}]"]`)) {
              let x = document.createElement("INPUT");
              x.setAttribute("type", "hidden");
              x.setAttribute("name", `field[${utms[utm]}]`);

              if (utm === "source") {
                x.setAttribute(
                  "value",
                  urlParamsCapt.get(paramName)
                    ? urlParamsCapt.get(paramName)
                    : document.referrer
                    ? urlParamsCaptReferrer.get(paramName) ||
                      new URL(document.referrer).hostname
                    : "direto"
                );
              } else if (utm === "paginaCaptura") {
                x.setAttribute(
                  "value",
                  window.location.pathname.replace("/", "")
                );
              } else {
                x.setAttribute(
                  "value",
                  urlParamsCapt.get(paramName) ||
                    urlParamsCaptReferrer.get(paramName) ||
                    ""
                );
              }

              el.appendChild(x);
            }
          }
        });
      }

      criarCampos();
      window.onload = criarCampos;
      document.getElementById("email").onchange = function () {
        criarCampos();
      };
    </script>
  </body>
</html>
